- name: Check Node Is Installed.
  become: no
  shell: bash -lc "npm --version | grep {{ npm_version }}"
  register: npm_is_updated
  changed_when: no
  failed_when: no

- name: npm Update.
  become: no
  shell: bash -lc "npm update -g"
  when: npm_is_updated|failed
  failed_when: no

- name: Check Serverless Is Installed.
  become: no
  shell: bash -lc "serverless Commands | grep {{ serverless_version }}"
  register: serverless_is_installed
  changed_when: no
  failed_when: no

- name: Install serverless
  become: no
  shell: bash -lc "npm install -g serverless"
  when: serverless_is_installed|failed
  failed_when: no
